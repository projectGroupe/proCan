# CanTraceDecoder

A C# WPF Desktop Application for Parsing, Decoding, and Visualizing CAN-Bus Trace Data Using PCan-Explorer `.sym` Files.

## Table of Contents

- [Overview](#overview)
- [Features](#features)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Usage](#usage)
- [Project Structure](#project-structure)
- [Customization](#customization)
- [License](#license)
- [Contributing](#contributing)
- [Acknowledgements](#acknowledgements)

## Overview

**CanTraceDecoder** is a C# Windows Presentation Foundation (WPF) desktop application designed to parse `.sym` files generated by **PCan-Explorer**, interpret CAN-Bus trace data, decode CAN messages and signals based on the definitions provided in the `.sym` file, and visualize the decoded signals graphically.

This tool is particularly useful for engineers and developers working with CAN networks, enabling them to efficiently analyze and interpret complex CAN trace data.

## Features

- **.sym File Parsing:** Reads and interprets `.sym` files from PCan-Explorer to extract CAN message definitions, enums, factors, offsets, and units.
- **Trace File Parsing:** Imports CAN-Bus trace data, including timestamps, CAN IDs, data length codes (DLC), and data bytes.
- **Decoding:** Decodes CAN messages and signals based on the definitions and scaling factors from the `.sym` file.
- **DataGrid Display:** Presents decoded CAN messages in a scrollable DataGrid with collapsible RowDetails for signal parameters.
- **Signal Visualization:** Uses LiveCharts to graphically display selected signals over time.
- **Scalability:** Scales raw signal values using **factor** and **offset** values and displays units.
- **User-Friendly Interface:** Intuitive UI with options to load files, select signals for visualization, and view data in a structured format.

## Prerequisites

Before building and running **CanTraceDecoder**, ensure you have the following installed:

- **Microsoft Visual Studio:** Version 2019 or later with .NET desktop development workload.
- **.NET Framework:** Version 4.7.2 or later (or corresponding .NET Core version, depending on project setup).
- **LiveCharts.Wpf:** NuGet package for data visualization.

## Installation

1. **Clone the Repository:**
	```
	git clone https://github.com/yourusername/CanTraceDecoder.git
	```
   
2. Open the Solution:

	- Navigate to the project directory and open CanTraceDecoder.sln in Visual Studio.

3. Restore NuGet Packages:

	- In Visual Studio, go to Tools > NuGet Package Manager > Package Manager Console.
	- Run the following command to restore required packages:

	```
	Update-Package -reinstall
	```

4. Build the Project:

	- Press Ctrl + Shift + B or select Build > Build Solution in the menu.
	
## Usage

Follow these steps to use CanTraceDecoder:

1. Launch the Application:
	
	- Start the application via Visual Studio (F5), or run the built executable from the bin directory.
	
2. Load .sym File: 
	
	- A default .sym for Invenox Batterys is loaded. (Can be found in Resources folder)
	- Click on the "Load .sym File" button.
	- Browse and select your .sym file generated by PCan-Explorer.
	- Upon successful loading, the DataGrid will display CAN messages defined in the .sym file.

3. Load Trace File:

	- Click on the "Load Trace File" button.
	- Browse and select your CAN-Bus trace file (e.g., .txt file from PCan-View).
	- The application will parse and decode the trace data based on the .sym definitions.


4. Viewing Decoded Messages and Signals:

	- The DataGrid will list all decoded CAN messages with columns for Timestamp (s), CANID, and Message Name.
	- Expand the RowDetails (click on the arrow or double-click the row) to view the associated signals.
	- Each signal is displayed with a Checkbox and its scaled Value with unit.


5. Visualizing Signals:

	- In the RowDetails under each message, check the boxes next to the signals you wish to visualize.
	- Selected signals will appear on the CartesianChart below, plotting their values over time.
	- Uncheck the boxes to remove the signals from the chart.

## Project Structure
````
CanTraceDecoder/
│
├── CanTraceDecoder.sln
│
├── CanTraceDecoder/
│   ├── CanTraceDecoder.csproj
│   │
│   ├── App.xaml
│   ├── App.xaml.cs
│   │
│   ├── MainWindow.xaml
│   ├── MainWindow.xaml.cs
│   │
│   ├── Models/
│   │   ├── CanMessageDefinition.cs
│   │   ├── CanSignal.cs
│   │   ├── CanTraceEntry.cs
│   │   ├── DecodedCanMessage.cs
│   │   ├── EnumDefinition.cs
│   │   └── CanVariableDefinition.cs
│   │
│   ├── Parsers/
│   │   ├── SymParser.cs
│   │   └── TraceParser.cs
│   │
│   ├── Decoder/
│   │   └── Decoder.cs
│   │
│   ├── Converters/
│   │   └── HexConverter.cs
│   │
│   ├── Resources/ (optional, für Bilder, Styles, etc.)
│   │   ├── message-icon.png
│   │   └── signal-icon.png
│   │
│   ├── Properties/
│   │   ├── AssemblyInfo.cs
│   │   └── Resources.resx
│   │
│   └── ... (weitere Ordner und Dateien nach Bedarf)
│
└── packages/ (vom NuGet-Paket-Manager verwaltet, optional angezeigt)
```
